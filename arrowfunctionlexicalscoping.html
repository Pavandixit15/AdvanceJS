<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        div {
  width: 300px;
  padding: 50px;
  margin: 20px;
  background-color: green;
  text-align-last: center;
}
    </style>
    <title>Document</title>
</head>
<body>
    <h2>Arrow function may be the biggest  advantage of using arrow function is that  they share the surrounding  this keyword so this means that unlike normal functions arrow function don't  get there this key word means they don't have  this key word <br> they Simply use this keyword of the function they are written  in  and so we say that they have  a lexical this variable </h2>
    <h3>
    only in the method call the this keyword actually  point to that object but in a regular function call  the this key'word will always point to the global object, which in the case browser is the window object. <br> so that what happened  here that clickme  method which is attached to an box5 object. so we can access the color and position by using this keyword but that clickme function call and the  event handler here is not a method it is a regular function call and therefore the this keyword doesn't point to the box5 object but instead it points to window object 
</h3>
<h2>The very common  pattern to  avoid this is to simply create a new variable and assign this keyword to that variable </h2>
    <div class="box  green">
  <h1>  I am Green</h1>
    </div>

    <script>
        // ES5
/*                        */
        var  box5 = {
            color : 'green',
            position : 1,
            clickMe : function () { 
                var self = this ;
                document.querySelector('.green').addEventListener('click', function () {
                    var  str = 'this is box number' + self.position + 'and it is ' + self.color;
                    alert(str);
                  });
             }
        }
        // box5.clickMe();

        // ES6 using arrow function
        var  box6 = {
            color : 'green',
            position : 1,
            clickMe : function () { 
                var self = this ;
                document.querySelector('.green').addEventListener('click', () => {
                    var  str = 'this is box number' + self.position + 'and it is ' + self.color;
                    alert(str);
                  });
             }
        }
        box6.clickMe();



    function Person(name) {
        this.name = name;
      }

    //   ES5

    Person.prototype.myFriends5=function(friends){
        var  arr=friends.map(function (el) { 
            return this.name + 'is Friends with ' + el;
         }.bind(this));
        
         console.log(arr)
    }

    var friends = ['bob', 'jane', 'Mark'];
    new Person('John').myFriends5(friends);


//    ES6
    Person.prototype.myFriends6=function(friends){

        var  arr=friends.map(el =>  `${this.name} + 'is Friends with ' + ${el}`);
        
         console.log(arr);
    }
    new 
    Person('Mike').myFriends6(friends);
    </script>
</body>
</html>